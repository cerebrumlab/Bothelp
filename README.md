Задание:

Есть веб-api, непрерывно принимающее события (ограничимся 10000 событий) для группы аккаунтов (1000 аккаунтов) и складывающее их в очередь. Каждое событие связано с определённым аккаунтом и важно, чтобы события аккаунта обрабатывались в том же порядке, в котором поступили в очередь. Обработка события занимает 1 секунду (эмулировать с помощью sleep). Сделать обработку очереди событий максимально быстрой на данной конкретной машине. Код писать на PHP. Можно использовать фреймворки и инструменты такие как RabbitMQ, Redis, MySQL и т.д.

Решение:
Для ускорения обработки создается 101 очередь в каждую очередь попадают клиенты по целочисленному делению на 10. 
Таким образом для каждого клиента все события поподают в одну очередь что гарантирует что они будут выполняться в правильном порядке


Установка

клонируем репозиторий
https://github.com/cerebrumlab/Bothelp.git

переходим в папку Bothelp/app
cd Bothelp/app
устанавливаем пакеты
composer install
выдаем права на исполнения воркера
chmod -R a+x bin/

собираем контейнер 
docker-compose build
запускаем контейнер 
docker-compose up -d
заходим в контейнер
docker exec -it php sh

Создаем и направляем в апи Эвенты
bin/console app:send-events 
Создание Эвентов в ручную 
http://localhost:8080/event/new/  POST {"account_id":38,"event_id":6}
Запускаем Консьюмеры 
bin/QueueWorker
